import{j as e,r as x,R as V}from"./react-b80b48f9.js";import{c as W}from"./react-dom-32f315b1.js";import{L as k,N as R,c as Z}from"./react-router-dom-926f326d.js";import{o as D}from"./@hookform-1a3c8ba2.js";import{u as O}from"./react-hook-form-4d9b5e18.js";import{c as q,a as N,b as G,d as Y,e as K}from"./yup-876aa6da.js";import{a as y}from"./axios-21b846bc.js";import{Q as S,k as X}from"./react-toastify-289ebeba.js";import{c as A,d as H,O as I,b as L,e as J,R as ee}from"./react-router-49f152f3.js";import{a as se}from"./jspdf-autotable-741782fe.js";import{E as te}from"./jspdf-3896afd8.js";import{f as F,a as B}from"./date-fns-bc282621.js";import{c as re}from"./react-confirm-alert-657de13d.js";import{_ as ne}from"./react-qr-code-085f0595.js";import"./core-js-c806274b.js";import"./scheduler-765c72db.js";import"./@remix-run-e784d403.js";import"./property-expr-38205fa5.js";import"./tiny-case-d0726479.js";import"./toposort-fd76a5c2.js";import"./clsx-1229b3e0.js";import"./@babel-4381f690.js";import"./fflate-8981c52c.js";import"./prop-types-387d7a00.js";import"./qr.js-8bf59ccc.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=l(i);fetch(i.href,a)}})();const ae=q({email:N().required().email(),password:N().required()}),oe=q({firstName:N().required(),lastName:N().required(),email:N().required().email(),password:N().required(),confirmPassword:N().required().oneOf([G("password"),""],"Passwords must match")});y.defaults.baseURL="/api";y.defaults.withCredentials=!0;const z=s=>s.data;y.interceptors.request.use(async s=>{try{const t=JSON.parse(localStorage.getItem("user")||"{}").token;return t&&s.headers&&(s.headers.Authorization=`Bearer ${t}`),s}catch(t){return console.log(t),await Promise.reject(t)}});y.interceptors.response.use(async s=>{const t=s.headers.pagination;return t&&(s.data={items:s.data,metaData:JSON.parse(t)}),s},async s=>{var a;if(!s.response)return S.error("Network error - make sure API is running!"),await Promise.reject(s);console.log("error, response ",s.response);const{data:t,status:l,config:n,headers:i}=s.response;switch(l){case 400:if(typeof t=="string"&&!t.includes("You do not have any active session")&&S.error(t),n.method==="get"&&((a=t.errors)!=null&&a.hasOwnProperty("id"))&&E.navigate("/not-found"),t.errors){const o=[];for(const h in t.errors)t.errors[h]&&o.push(t.errors[h]);throw o.flat()}break;case 401:l===401&&i["www-authenticate"].startsWith('Bearer error="invalid_token"')?(localStorage.removeItem("user"),S.error("Session expired - please login again"),E.navigate("/login")):S.error(t.title||"Unauthorized");break;case 404:E.navigate("/not-found");break;case 405:S.error("Method not allowed");break;case 500:E.navigate("/server-error",{state:{error:t}});break}return await Promise.reject(s)});const j={get:(s,t)=>y.get(s,{params:t}).then(z),post:(s,t)=>y.post(s,t).then(z),put:(s,t)=>y.put(s,t).then(z),del:s=>y.delete(s).then(z)},le={createAttendee:(s,t,l)=>j.post(`/attendance/createAttendee/${s}?accessToken=${t}&linkToken=${l}`,{}),getAttendees:(s,t)=>j.get(`/attendance/sessionAttendees/${s}`,t),exportToCSV:s=>j.get(`/attendance/exportToCSV/${s}`),getAllSessionAttendees:s=>j.get(`/attendance/getAllSessionAttendees/${s}`)},ie={login:s=>j.post("/account/login",s),register:s=>j.post("/account/register",s),current:()=>j.get("/account"),googleLogin:s=>j.post(`/account/googleLogin?accessToken=${s}`,{}),refreshAppUserToken:()=>j.post("/account/refereshAppUserToken",{})},ce={createSession:s=>j.post("/session/createSession",s),getSessions:s=>j.get("/session/getSessions",s),deleteSession:s=>j.del(`/session/deleteSession/${s}`),getSession:s=>j.get(`/session/getSession/${s}`),updateSession:(s,t)=>j.put(`/session/updateSession/${s}`,t),getCurrentSession:()=>j.get("/session/getCurrentSession"),refreshLinkToken:s=>j.post(`/session/refereshLinkToken/${s}`,{})},f={Attendance:le,Account:ie,Session:ce};function C({text:s}){return e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-100",children:[e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-slate-700"})}),s&&e.jsx("h1",{className:"text-slate-700 text-3xl ml-4",children:s})]})}function de(){var u,p;const s=A(),{register:t,handleSubmit:l,formState:{errors:n,isSubmitting:i}}=O({resolver:D(ae)}),[a,o]=x.useState(!0),[h,d]=x.useState();function m(r){let c=JSON.parse(atob(r.token.split(".")[1]));const w=typeof c.role=="string"?[c.role]:c.role;localStorage.setItem("user",JSON.stringify({...r,roles:w})),s("/user-profile")}const g=async({email:r,password:c})=>{try{const w=await f.Account.login({email:r,password:c});m(w)}catch(w){console.log(w),d("Invalid email or password")}};if(typeof google>"u")return e.jsx(C,{text:"App loading... If this is taking too long, please refresh!"});x.useEffect(()=>{google.accounts.id.initialize({client_id:"559758667407-k0a5jbbmsabs5v5e6carbuj4md1tluao.apps.googleusercontent.com",callback:b}),google.accounts.id.renderButton(document.getElementById("buttonDiv"),{theme:"outline",size:"large",type:"standard",text:"sign_in_with",shape:"rectangular",width:"250",height:"200",longtitle:!0,onsuccess:b,onfailure:r=>{console.log(r)}}),google.accounts.id.prompt(r=>{r.isNotDisplayed()?console.log("Prompt was not displayed"):r.isSkippedMoment()?console.log("Prompt was skipped"):r.isDismissedMoment()&&console.log("Prompt was dismissed")})},[s,localStorage,window.location.search]);const b=async r=>{try{const c=await f.Account.googleLogin(r.credential);m(c)}catch(c){console.log(c)}};return e.jsxs("div",{className:"bg-purple-900 absolute top-0 left-0 bg-gradient-to-b from-gray-500 via-gray-500 to-slate-700 bottom-0 leading-5 h-full w-full",children:[e.jsx("div",{className:"bg-purple-900 absolute top-0 left-0 bg-gradient-to-b from-gray-500 via-gray-500 to-slate-700 bottom-0 leading-5 h-full w-full overflow-hidden"}),e.jsxs("div",{className:"relative min-h-screen  sm:flex sm:flex-row  justify-center bg-transparent rounded-3xl shadow-xl",children:[e.jsx("div",{className:"flex-col flex  self-center lg:px-14 w-[28rem] sm:max-w-4xl xl:max-w-md  z-10",children:e.jsxs("div",{className:" self-start hidden lg:flex flex-col  text-gray-300",children:[e.jsx("h1",{className:"my-3 font-semibold text-4xl",children:"Revolutionize Attendance Tracking with Count Me In!"}),e.jsxs("p",{className:"pr-3 text-sm text-gray-700 bg-slate-400 bg-opacity-50 p-4",children:["Say goodbye to traditional methods and hello to easy attendance management. Designed with University of The Gambia lecturers in mind, Count Me In streamlines the process. Now, students can log their attendance without interference, promoting fairness.",e.jsx("span",{className:"inline-block",children:"The rule is simple: be present and scan the QR code. Join the attendance revolution today!"})]})]})}),e.jsx("div",{className:"flex justify-center self-center  z-10",children:e.jsxs("div",{className:"p-12 pt-2 bg-white mx-auto rounded-3xl w-96 ",children:[e.jsxs("div",{className:"mb-7",children:[e.jsxs("p",{className:"text-xl font-semibold text-gray-800 capitalize",children:["To Log Attendance"," "]}),e.jsxs("button",{className:"mt-4 bg-slate-500 hover:bg-slate-700 text-white text-base rounded-lg py-2.5 px-5 transition-colors w-full text-[19px]",children:["Scan QR Code ",e.jsx("span",{className:"ml-2",children:"ðŸ“±"})]})]}),e.jsxs("h3",{className:"font-semibold text-xl text-gray-800 mb-2 ",children:["Sign In"," "]}),e.jsxs("div",{children:[e.jsxs("form",{onSubmit:l(g),className:"space-y-6",children:[e.jsxs("div",{className:"",children:[e.jsx("input",{className:" w-full text-sm  px-4 py-3 bg-gray-200 focus:bg-gray-100 border  border-gray-200 rounded-lg focus:outline-none focus:border-slate-400",type:"",placeholder:"Email",...t("email")}),n.email&&e.jsx("p",{className:"text-red-500 text-xs italic",children:(u=n.email)==null?void 0:u.message})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{...t("password"),placeholder:"Password",type:a?"password":"text",className:"text-sm px-4 py-3 rounded-lg w-full bg-gray-200 focus:bg-gray-100 border border-gray-200 focus:outline-none focus:border-slate-400"}),e.jsx("div",{className:"flex items-center absolute inset-y-0 right-0 mr-3  text-sm leading-5",children:a?e.jsx("svg",{onClick:()=>o(!a),className:"h-4 text-slate-500 hover:text-slate-700 transition-colors cursor-pointer",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:e.jsx("path",{fill:"currentColor",d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"})}):e.jsx("svg",{className:"h-4 text-slate-500 hover:text-slate-700 transition-colors cursor-pointer",onClick:()=>o(!a),fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",children:e.jsx("path",{fill:"currentColor",d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"})})})]}),n.password&&e.jsx("p",{className:"text-red-500 text-xs italic",children:(p=n.password)==null?void 0:p.message})]}),h&&e.jsx("p",{className:"text-red-500 text-xs italic",children:h}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"text-sm ml-auto",children:e.jsx("a",{href:"#",className:"text-purple-700 hover:text-purple-600",children:"Forgot your password?"})})}),e.jsxs("div",{children:[e.jsx("button",{type:"submit",className:"my-4 bg-slate-500 hover:bg-slate-700 text-white text-base rounded-lg py-2.5 px-5 transition-colors w-full text-[19px]",children:e.jsxs("div",{className:"flex items-center justify-center",children:[i&&e.jsx("div",{className:"h-5 w-5 border-t-transparent border-solid animate-spin rounded-full border-white border-4"})," ",e.jsx("div",{className:"ml-2",children:" Sign In "})]})}),e.jsxs("p",{className:"text-gray-400",children:["Don't have an account?"," ",e.jsx(k,{to:"/signup",className:"text-sm text-purple-700 hover:text-purple-700",children:"Sign Up"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 my-5",children:[e.jsx("span",{className:"h-px w-16 bg-gray-100"}),e.jsx("span",{className:"text-gray-300 font-normal",children:"or"}),e.jsx("span",{className:"h-px w-16 bg-gray-100"})]}),e.jsxs("div",{className:"flex justify-center gap-5 w-full ",children:[i&&e.jsx("div",{className:"h-5 w-5 border-t-transparent border-solid animate-spin rounded-full border-white border-4"})," ",e.jsxs("button",{id:"buttonDiv",className:"w-full flex items-center justify-center mb-6 md:mb-0 border border-gray-300 hover:border-slate-600 hover:bg-slate-700 hover:text-white text-sm text-gray-500 p-3  rounded-lg tracking-wide font-medium  cursor-pointer transition ease-in duration-500",children:[e.jsxs("svg",{className:"w-4 mr-2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{fill:"#EA4335",d:"M5.266 9.765A7.077 7.077 0 0 1 12 4.909c1.69 0 3.218.6 4.418 1.582L19.91 3C17.782 1.145 15.055 0 12 0 7.27 0 3.198 2.698 1.24 6.65l4.026 3.115Z"}),e.jsx("path",{fill:"#34A853",d:"M16.04 18.013c-1.09.703-2.474 1.078-4.04 1.078a7.077 7.077 0 0 1-6.723-4.823l-4.04 3.067A11.965 11.965 0 0 0 12 24c2.933 0 5.735-1.043 7.834-3l-3.793-2.987Z"}),e.jsx("path",{fill:"#4A90E2",d:"M19.834 21c2.195-2.048 3.62-5.096 3.62-9 0-.71-.109-1.473-.272-2.182H12v4.637h6.436c-.317 1.559-1.17 2.766-2.395 3.558L19.834 21Z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.277 14.268A7.12 7.12 0 0 1 4.909 12c0-.782.125-1.533.357-2.235L1.24 6.65A11.934 11.934 0 0 0 0 12c0 1.92.445 3.73 1.237 5.335l4.04-3.067Z"})]}),e.jsx("span",{children:"Google"})]})]})]}),e.jsx("div",{className:"mt-7 text-center text-gray-300 text-xs",children:e.jsxs("span",{children:["Copyright Â© 2023-2024",e.jsx("a",{href:"#",rel:"",target:"_blank",title:"Fabala Dibbasey",className:"ml-2 text-purple-500 hover:text-purple-600 ",children:"Fabala"})]})})]})})]}),e.jsx("svg",{className:"absolute bottom-0 left-0 ",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",children:e.jsx("path",{fill:"#fff",fillOpacity:"1",d:"M0,0L40,42.7C80,85,160,171,240,197.3C320,224,400,192,480,154.7C560,117,640,75,720,74.7C800,75,880,117,960,154.7C1040,192,1120,224,1200,213.3C1280,203,1360,149,1400,122.7L1440,96L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"})})]})}function me(){const s=A(),[t,l]=x.useState({sessionName:"",sessionId:"",host:"",expired:!1,linkToken:""}),[n,i]=x.useState(!1),[a,o]=x.useState();if(x.useEffect(()=>{const g=new URLSearchParams(window.location.search).get("linkToken");g&&(g==null?void 0:g.split(".").length)===3&&(localStorage.setItem("linkToken",JSON.stringify(g)),s("/"))},[window.location.search,localStorage,f.Attendance,l,o,i,s]),x.useEffect(()=>{const m=JSON.parse(localStorage.getItem("linkToken"));if(!m||m.split(".").length!==3)return;const g=JSON.parse(atob(m.split(".")[1]));l({sessionName:g.unique_name,sessionId:g.nameid,host:g.given_name,expired:g.exp*1e3<Date.now(),linkToken:JSON.parse(localStorage.getItem("linkToken"))})},[localStorage,window.location.search,s,f.Attendance,l,o,i,s]),typeof google>"u")return e.jsx(C,{text:"App loading... If this is taking too long, please refresh!"});x.useEffect(()=>{google.accounts.id.initialize({client_id:"559758667407-k0a5jbbmsabs5v5e6carbuj4md1tluao.apps.googleusercontent.com",callback:h}),google.accounts.id.renderButton(document.getElementById("buttonDiv"),{theme:"outline",size:"large",text:"continue_with",type:"standard",shape:"rectangular",width:"350",height:"50",longtitle:!0,onsuccess:h,onfailure:m=>{console.log(m)}}),google.accounts.id.prompt(m=>{m.isNotDisplayed()?console.log("Prompt was not displayed"):m.isSkippedMoment()?console.log("Prompt was skipped"):m.isDismissedMoment()&&console.log("Prompt was dismissed")})},[h]);async function h(m){try{i(!0);const g=await f.Attendance.createAttendee(t.sessionId,m.credential,t.linkToken);o(g),S.success("You have successfully registered for this session!")}catch(g){console.log(g)}finally{i(!1)}}function d(){localStorage.removeItem("linkToken"),window.close()}return n?e.jsx(C,{}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("img",{src:"/images/logo.png",alt:"Logo",className:"w-30 h-20"})}),e.jsx("h1",{className:"text-2xl font-semibold text-center text-gray-500 mt-8 mb-6",children:"Hello there, Welcome!"}),a?e.jsxs("div",{className:"flex bg-green-100 rounded-lg p-4 mb-4 text-sm text-green-700",role:"alert",children:[e.jsx("svg",{className:"w-5 h-5 inline mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[`${a.firstName} ${a.lastName} (${a.matNumber})`,"!"]})," ","You have successfully registered for the '",t.sessionName,"' session, hosted by ",t.host,"."]})]}):e.jsxs("p",{className:"text-sm text-gray-600 text-justify mt-8 mb-6",children:["By clicking on countinue with Google, your name, email and MATNumber will be sent to the '",t.sessionName,"' session, hosted by"," ",t.host,", for registration purposes only."]}),a?e.jsx("div",{className:"flex justify-center space-x-4 my-4",children:e.jsx("button",{onClick:d,className:"my-4 bg-slate-500 hover:bg-slate-700 text-white text-base rounded-lg py-2.5 px-5 transition-colors w-full text-[19px]",children:"Save To Exit Page"})}):e.jsx("div",{className:"flex justify-center space-x-4 my-4",children:e.jsx("button",{id:"buttonDiv",className:"my-4 bg-slate-500 hover:bg-slate-700 text-white text-base rounded-lg py-2.5 px-5 transition-colors w-full text-[19px]",children:"Continue with Google"})}),!a&&t.expired&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex bg-yellow-100 rounded-lg p-4 mb-4 text-sm text-yellow-700",role:"alert",children:[e.jsx("svg",{className:"w-5 h-5 inline mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Invalid Link!"})," This link is either expired or was not meant for you. Please re scan the QR code or contact the session's host."]})]}),e.jsx("button",{className:"my-4 bg-slate-500 hover:bg-slate-700 text-white text-base rounded-lg py-2.5 px-5 transition-colors w-full text-[19px]",children:"Scan QR Code Again"})]}),e.jsxs("p",{className:"text-gray-400",children:["Interested in Hosting a Session?"," ",e.jsx(k,{to:"/login",className:"text-sm text-purple-700 hover:text-purple-700",children:"Sign In"})]})]})})}function _({metaData:{currentPage:s,pageSize:t,totalCount:l,totalPages:n,hasNext:i,hasPrevious:a},onPageChange:o}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{"aria-label":"Page navigation",children:e.jsxs("ul",{className:`inline-flex space-x-2\r
           w-full md:w-2/3 flex-wrap items-center justify-start md:justify-start\r
         `,children:[a&&e.jsx("li",{children:e.jsx("button",{onClick:()=>o(s-1),className:`\r
          flex\r
          items-center\r
          justify-center\r
          w-10\r
          h-10\r
          text-slate-700\r
          transition-colors\r
          duration-150\r
          rounded-full\r
          focus:shadow-outline\r
          hover:bg-slate-200\r
        `,children:e.jsx("svg",{className:"w-4 h-4 fill-current",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd",fillRule:"evenodd"})})})}),t>0&&Array.from(Array(n).keys()).map(h=>e.jsx("li",{children:e.jsx("button",{onClick:()=>o(h+1),className:`${s===h+1?"bg-slate-500 text-white":"bg-white"} flex items-center justify-center w-10 h-10 transition-colors duration-150 rounded-full focus:shadow-outline hover:bg-slate-200`,children:h+1})},h)),i&&e.jsx("li",{children:e.jsx("button",{onClick:()=>o(s+1),className:`\r
          flex\r
          items-center\r
          justify-center\r
          w-10\r
          h-10\r
          text-slate-700\r
          transition-colors\r
          duration-150\r
          bg-white\r
          rounded-full\r
          focus:shadow-outline\r
          hover:bg-slate-200\r
        `,children:e.jsx("svg",{className:"w-4 h-4 fill-current",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd",fillRule:"evenodd"})})})})]})}),e.jsxs("div",{className:"flex items-center justify-center w-full",children:["Showing ",t*(s-1)+1," to ",t*s," ","of ",l," ",l>1?"entries":"entry"]})]})}function Q({metaData:s,onPageSizeChange:t,onSearch:l}){return e.jsxs("div",{className:"w-full mx-auto mt-6 md:flex md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-gray-700",children:"Show"}),e.jsx("select",{onChange:n=>{t(parseInt(n.target.value))},value:s.pageSize,className:"border border-gray-300 rounded-md text-gray-600 h-9 pl-5 pr-10 bg-white hover:border-gray-400 focus:outline-none appearance-none",children:[5,10,15,20].map(n=>e.jsx("option",{children:n},n))}),e.jsx("span",{className:"ml-2 text-gray-700",children:"Entries"})]}),e.jsxs("form",{onSubmit:n=>{n.preventDefault(),l(n.currentTarget[0].value)},className:"relative flex items-center mt-4 md:mt-0",children:[e.jsx("span",{className:"absolute",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-5 h-5 mx-3 text-gray-400 dark:text-gray-600",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})}),e.jsx("input",{type:"text",placeholder:"Search",className:"block w-full py-1.5 pr-5 text-gray-700 bg-white border border-gray-200 rounded-lg md:w-80 placeholder-gray-400/70 pl-11 rtl:pr-11 rtl:pl-5 dark:border-gray-600 focus:border-slate-300 focus:ring-slate-400 focus:outline-none focus:ring focus:ring-opacity-40"}),e.jsx("input",{type:"submit",className:"absolute invisible"})]})]})}const P=s=>{const t=new URLSearchParams;return Object.entries(s).forEach(([l,n])=>{n&&t.append(l,n.toString()),(n==null||n===""||Array.isArray(n)&&n.length===0)&&t.delete(l)}),t};function xe(){const[s,t]=x.useState(),[l,n]=x.useState(),[i,a]=x.useState(!1),[o,h]=x.useState("Excel"),{id:d}=H();x.useEffect(()=>{(async()=>{try{a(!0);const p=await f.Attendance.getAttendees(d);t(p.items),n(p.metaData)}catch(p){console.log(p)}finally{a(!1)}})()},[d]);const m=async(u,p)=>{const r=P({pageNumber:u,pageSize:p||l.pageSize});try{a(!0);const c=await f.Attendance.getAttendees(d,r);t(c.items),n(c.metaData)}catch(c){console.log(c)}finally{a(!1)}},g=async u=>{const p=P({pageNumber:1,pageSize:l.pageSize,searchTerm:u});try{a(!0);const r=await f.Attendance.getAttendees(d,p);t(r.items),n(r.metaData)}catch(r){console.log(r)}finally{a(!1)}},b=async u=>{try{if(a(!0),u==="Excel"){const p=await f.Attendance.exportToCSV(d),r=URL.createObjectURL(new Blob([p])),c=document.createElement("a");c.href=r,c.setAttribute("download",(s==null?void 0:s.sessionName)+".csv"),document.body.appendChild(c),c.click(),c.remove()}else{const p=await f.Attendance.getAllSessionAttendees(d),r=new te;se(r,{headStyles:{fillColor:"#616161"},head:[["First Name","Last Name","Email","MATNumber"]],body:p.map(c=>[c.firstName,c.lastName,c.email,c.matNumber])}),r.save((s==null?void 0:s.sessionName)+".pdf")}}catch(p){console.log(p)}finally{a(!1)}};return i?e.jsx(C,{}):e.jsxs("div",{className:"container mx-auto w-full md:w-11/12 ",style:{minHeight:"calc(100vh - 6rem)"},children:[e.jsx(k,{to:"/user-profile/session-history",className:"flex items-center justify-center w-10 h-10 text-slate-600 transition-colors duration-150 rounded-full focus:shadow-outline hover:bg-gray-100",children:e.jsx("svg",{className:"w-8 h-8 text-center fill-current",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10.707 10l4.647 4.646a1 1 0 11-1.414 1.414L9.293 11.414a1 1 0 010-1.414L14.94 4.94a1 1 0 111.414 1.414L10.707 10z",clipRule:"evenodd",fillRule:"evenodd"})})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center w-full md:w-11/12 mx-auto my-6 mt-2",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-700",children:s==null?void 0:s.sessionName}),e.jsx("p",{className:"text-sm font-medium text-gray-400",children:s==null?void 0:s.status})]})}),e.jsx("div",{className:"flex items-center mt-4 md:mt-0",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-700",children:s&&F(new Date(s.sessionExpiresAt),"MMMM, EEEE do, h:mm a")}),e.jsxs("p",{className:"text-sm font-medium text-gray-400",children:["expires in"," ",s&&(s.status!=="Expired"?B(new Date(s.sessionExpiresAt)):B(new Date(s.sessionExpiresAt),{addSuffix:!0}))]})]})})]}),e.jsx("div",{className:"w-full md:w-11/12 mx-auto",children:l&&e.jsx(Q,{onPageSizeChange:u=>m(1,u),onSearch:u=>g(u),metaData:l})}),e.jsx("div",{className:"bg-white shadow-md rounded my-6 overflow-x-auto w-full md:w-11/12 mx-auto",children:e.jsxs("table",{className:"min-w-max w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200 text-gray-600 uppercase text-sm leading-normal",children:[e.jsx("th",{className:"py-3 px-6 text-left",children:"First Name"}),e.jsx("th",{className:"py-3 px-6 text-left",children:"Last Name"}),e.jsx("th",{className:"py-3 px-6 text-center",children:"Email"}),e.jsx("th",{className:"py-3 px-6 text-center",children:"MATNumber"}),e.jsx("th",{className:"py-3 px-6 text-center",children:"Joined At"})]})}),e.jsx("tbody",{className:"text-gray-600 text-sm font-light",children:s==null?void 0:s.attendees.map((u,p)=>e.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[e.jsx("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"font-medium",children:u.firstName})})}),e.jsx("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"font-medium",children:u.lastName})})}),e.jsx("td",{className:"py-3 px-6 text-center whitespace-nowrap",children:e.jsx("span",{className:"py-1 px-3 rounded-full text-md font-medium",children:u.email})}),e.jsx("td",{className:"py-3 px-6 text-center whitespace-nowrap",children:e.jsx("span",{className:"py-1 px-3 rounded-full text-md font-medium",children:u.matNumber})}),e.jsx("td",{className:"py-3 px-6 mx-auto",children:e.jsxs("div",{className:"flex place-content-center",children:[e.jsx("div",{className:"mr-2",children:e.jsx("img",{className:"w-6 h-6 rounded-full",src:"/images/clock.svg"})}),e.jsxs("span",{children:[B(new Date(u.createdAt))," ago"]})]})})]},p))})]})}),e.jsxs("div",{className:"w-full md:w-11/12 mx-auto",children:[l&&e.jsx(_,{metaData:l,onPageChange:u=>m(u)}),e.jsxs("div",{className:"flex w-full justify-end items-center mt-4 md:mt-0",children:[e.jsx("span",{className:"mr-2 text-gray-700",children:"Export to"}),e.jsxs("select",{onChange:u=>h(u.target.value),value:o,className:"border border-gray-300 rounded-md text-gray-600 h-9 pl-5 pr-10 bg-white hover:border-gray-400 focus:outline-none appearance-none",children:[e.jsx("option",{value:"Excel",children:"Excel"}),e.jsx("option",{value:"PDF",children:"PDF"})]}),e.jsx("button",{onClick:()=>b(o),className:`\r
                ml-2\r
                flex\r
                items-center\r
                justify-center\r
                w-10\r
                h-10\r
                text-indigo-600\r
                transition-colors\r
                duration-150\r
                rounded-full\r
                focus:shadow-outline\r
                hover:bg-indigo-100\r
                `,children:e.jsx("svg",{className:"w-4 h-4 fill-current",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd",fillRule:"evenodd"})})})]})]})]})}function ue(){const[s,t]=x.useState([]),[l,n]=x.useState(!1),[i,a]=x.useState(!0),[o,h]=x.useState(""),[d,m]=x.useState();x.useEffect(()=>{g()},[]);const g=async()=>{try{n(!0);const r=await f.Session.getSessions();t(r.items),m(r.metaData)}catch(r){console.log(r)}finally{n(!1)}},b=async r=>{re({title:"Confirm to delete",message:"Are you sure to delete this session? This action cannot be undone.",buttons:[{label:"Yes",onClick:async()=>{try{a(!0),h(r),await f.Session.deleteSession(r),g()}catch(c){console.log(c)}finally{a(!1),h("")}}},{label:"No",onClick:()=>{}}]})},u=async(r,c)=>{const w=P({pageNumber:r,pageSize:c||d.pageSize});try{n(!0);const v=await f.Session.getSessions(w);t(v.items),m(v.metaData)}catch(v){console.log(v)}finally{n(!1)}},p=async r=>{const c=P({searchTerm:r,pageNumber:1,pageSize:d.pageSize});try{n(!0);const w=await f.Session.getSessions(c);t(w.items),m(w.metaData)}catch(w){console.log(w)}finally{n(!1)}};return l?e.jsx(C,{}):e.jsxs("div",{className:"container mx-auto w-full md:w-11/12",children:[d&&e.jsx(Q,{onPageSizeChange:r=>u(1,r),onSearch:r=>p(r),metaData:d}),e.jsx("div",{className:"bg-white shadow-md rounded my-6 overflow-x-auto",children:e.jsxs("table",{className:"min-w-max w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200 text-gray-600 uppercase text-sm leading-normal",children:[e.jsx("th",{className:"py-3 px-6 text-left w-1/3 ",children:"Session"}),e.jsx("th",{className:"py-3 px-6 text-left",children:"Expiration Date"}),e.jsx("th",{className:"py-3 px-6 text-center",children:"Attendees"}),e.jsx("th",{className:"py-3 px-6 text-center",children:"Status"}),e.jsx("th",{className:"py-3 px-6 text-center",children:"Actions"})]})}),e.jsx("tbody",{className:"text-gray-600 text-sm font-light",children:s.map((r,c)=>e.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[e.jsx("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"font-medium",children:r.sessionName.length>35?e.jsxs("span",{children:[r.sessionName.slice(0,35),"..."]}):r.sessionName})})}),e.jsx("td",{className:"py-3 px-6 text-left",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2",children:e.jsx("img",{className:"w-6 h-6 rounded-full",src:"/images/clock.svg"})}),e.jsxs("span",{children:[" ",F(new Date(r.sessionExpiresAt),"MMMM, EEEE do, h:mm a")," "]})]})}),e.jsx("td",{className:"py-3 px-6 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("img",{className:"w-6 h-6 rounded-full border-gray-200 border transform hover:scale-125",src:"/images/person.png"}),e.jsx("img",{className:"w-6 h-6 rounded-full border-gray-200 border -m-1 transform hover:scale-125",src:"/images/person.png"}),e.jsx("img",{className:"object-cover w-6 h-6 -mx-1 border-2 border-white rounded-full dark:border-gray-700 shrink-0",src:"/images/person.png"}),e.jsx("p",{className:"flex items-center justify-center w-8 h-8 -mx-1 text-xs text-slate-700 bg-gray-200 border-2 border-white rounded-full",children:r.attendeesCount>3?`+${r.attendeesCount-3}`:r.attendeesCount})]})}),e.jsx("td",{className:"py-3 px-6 text-center",children:e.jsx("span",{className:"bg-purple-200 text-purple-600 py-1 px-3 rounded-full text-xs",children:r.status})}),e.jsx("td",{className:"py-3 px-6 text-center",children:e.jsxs("div",{className:"flex item-center justify-center",children:[e.jsx(k,{to:`/session-details/${r.sessionId}`,className:"w-4 mr-2 transform hover:text-purple-500 hover:scale-110",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx(k,{to:`/user-profile/generate-qr-code/${r.sessionId}`,className:"w-4 mr-2 transform hover:text-purple-500 hover:scale-110",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("div",{onClick:()=>{b(r.sessionId)},className:"w-4 mr-2 transform hover:text-purple-500 hover:scale-110",children:i&&o==r.sessionId?e.jsx("div",{className:"h-5 w-5 border-t-transparent border-solid animate-spin rounded-full border-slate-500 border-2"}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},c))})]})}),d&&e.jsx(_,{metaData:d,onPageChange:r=>u(r)})]})}function he(){const s=A(),t=JSON.parse(localStorage.getItem("user"));let l;x.useEffect(()=>(i(t),()=>{a()}),[t,localStorage.getItem("user")]);const n=async()=>{a();try{const o=await f.Account.refreshAppUserToken();o&&(localStorage.setItem("user",JSON.stringify(o)),i(o))}catch(o){console.log(o)}};function i(o){const h=JSON.parse(atob(o.token.split(".")[1])),m=new Date(h.exp*1e3).getTime()-Date.now()-5*1e3*60;l=setTimeout(n,m)}function a(){clearTimeout(l)}return e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"bg-white relative rounded-lg w-full md:w-11/12 mx-auto",children:[e.jsxs("div",{className:"w-full md:w-11/12 mx-auto flex justify-center items-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:t.profileImageUrl||"/images/person.png",alt:"",className:"rounded-full mx-auto w-20 h-20 shadow-md border-4 border-white transition duration-200 transform hover:scale-110"})}),e.jsxs("div",{className:"flex flex-col justify-center items-center ml-2",children:[e.jsx("h1",{className:"font-bold text-center text-xl text-gray-900",children:t.displayName}),e.jsx("p",{onClick:()=>{localStorage.removeItem("user"),s("/login")},className:"text-center text-slate-500 text-sm cursor-pointer hover:text-red-600 transition-colors leading-5 tracking-widest ",children:"Logout"})]})]}),e.jsx("div",{className:"w-full md:w-11/12 mx-auto",children:e.jsxs("div",{className:"flex space-x-2 justify-between items-center my-2 px-4",children:[e.jsx(R,{to:"/user-profile/current-session",className:({isActive:o})=>o?" w-full md:w-1/3 text-gray-200 block rounded-lg text-center font-medium leading-6 px-6 py-3 bg-slate-600 hover:bg-slate-700 hover:text-white":"text-gray-500 hover:text-gray-900 shadow-sm hover:bg-gray-100 rounded transition duration-150 ease-in font-medium text-sm text-center py-3 w-full md:w-1/3 text-center",children:"Current Session"}),e.jsxs(R,{to:"/user-profile/generate-qr-code",className:({isActive:o})=>o?" w-full md:w-1/3 text-gray-200 block rounded-lg text-center font-medium leading-6 px-6 py-3 bg-slate-600 hover:bg-slate-700 hover:text-white":"text-gray-500 hover:text-gray-900 shadow-sm hover:bg-gray-100 rounded transition duration-150 ease-in font-medium text-sm text-center py-3 w-full  md:w-1/3 text-center",children:["Generate ",e.jsx("span",{className:"font-bold",children:"QRCode"})]}),e.jsx(R,{to:"/user-profile/session-history",className:({isActive:o})=>o?" w-full md:w-1/3 text-gray-200 rounded-lg text-center font-medium leading-6 px-6 py-3 bg-slate-600 hover:bg-slate-700 hover:text-white":"text-gray-500 hover:text-gray-900 shadow-sm hover:bg-gray-100 rounded transition duration-150 ease-in font-medium text-sm text-center py-3 w-full md:w-1/3 text-center",children:"Session History"})]})}),e.jsx("div",{className:"w-full md:w-11/12 mx-auto",children:e.jsx(I,{})})]})})}function pe(){const s=L();return x.useEffect(()=>{window.scrollTo(0,0)},[s.pathname]),null}const ge=()=>e.jsxs(e.Fragment,{children:[e.jsx(pe,{}),e.jsx(I,{}),e.jsx(X,{position:S.POSITION.BOTTOM_RIGHT})]}),fe=q({sessionName:N().required().min(3),sessionExpiresAt:N().required("Session expiration date is required"),regenerateLinkToken:Y().required(),linkExpiryFreequency:K().notRequired().min(20)});function we(){const s=A(),[t,l]=x.useState(!1),[n,i]=x.useState(),{reset:a,register:o,handleSubmit:h,watch:d,formState:{errors:m,isSubmitting:g}}=O({resolver:D(fe)}),{id:b}=H();x.useEffect(()=>{b&&(async()=>{try{l(!0);const r=await f.Session.getSession(b);if(r){const{sessionName:c,sessionExpiresAt:w,regenerateLinkToken:v,linkExpiryFreequency:M}=r;a({sessionName:c,sessionExpiresAt:new Date(w).toISOString().slice(0,16),regenerateLinkToken:!v,linkExpiryFreequency:M})}}catch(r){console.log(r)}finally{l(!1)}})()},[b,a]);const u=async p=>{const{sessionName:r,sessionExpiresAt:c,linkExpiryFreequency:w,regenerateLinkToken:v}=p;let M={sessionName:r,sessionExpiresAt:c,regenerateLinkToken:!v,linkExpiryFreequency:w};try{if(l(!0),b){const T=await f.Session.updateSession(b,M);i(T)}else{const T=await f.Session.createSession(M);i(T)}}catch(T){console.log(T)}finally{l(!1),s("/user-profile/current-session",{state:{session:n}})}};return t?e.jsx(C,{}):e.jsx("div",{className:"w-full p-8 pt-0 lg:w-1/2 mx-auto ",children:e.jsxs("form",{onSubmit:h(u),children:[e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Session Name"}),e.jsx("input",{className:"w-full text-sm  px-4 py-3 bg-gray-200 focus:bg-gray-100 border  border-gray-200 rounded-lg focus:outline-none focus:border-purple-400",type:"text",placeholder:"title or subject of session",...o("sessionName")}),m.sessionName&&e.jsx("p",{className:"text-red-500 text-xs italic",children:m.sessionName.message})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Expires at"}),e.jsx("input",{className:"w-full text-sm  px-4 py-3 bg-gray-200 focus:bg-gray-100 border  border-gray-200 rounded-lg focus:outline-none focus:border-purple-400",type:"datetime-local",placeholder:"Enter a date and time",...o("sessionExpiresAt"),defaultValue:new Date(Date.now()+2*60*60*1e3).toISOString().slice(0,16)}),m.sessionExpiresAt&&e.jsx("p",{className:"text-red-500 text-xs italic",children:m.sessionExpiresAt.message})]}),!d("regenerateLinkToken")&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:["Regenerate after (seconds)"," ",e.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),e.jsx("input",{className:"w-full text-sm  px-4 py-3 bg-gray-200 focus:bg-gray-100 border  border-gray-200 rounded-lg focus:outline-none focus:border-purple-400",type:"number",placeholder:"For every 30 seconds, enter 30",...o("linkExpiryFreequency"),defaultValue:30}),m.linkExpiryFreequency&&e.jsx("p",{className:"text-red-500 text-xs italic",children:m.linkExpiryFreequency.message})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"inline-flex items-center text-gray-700 text-sm font-bold mb-2 w-full",children:[e.jsx("input",{className:"form-checkbox h-5 w-5 text-gray-600",type:"checkbox",...o("regenerateLinkToken")}),e.jsx("span",{className:"ml-2",children:"Do not regenerate QRCode"})]})}),d("regenerateLinkToken")&&e.jsxs("div",{className:"flex bg-blue-100 rounded-lg p-4 mb-4 text-sm text-blue-700",role:"alert",children:[e.jsx("svg",{className:"w-5 h-5 inline mr-3",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"We recommend"})," you regenerate the QRCode every few seconds to prevent link sharing."]})]}),e.jsx("button",{type:"submit",className:"my-4 bg-slate-500 hover:bg-slate-700 text-white text-base rounded-lg py-2.5 px-5 transition-colors w-full text-[19px]",children:e.jsxs("div",{className:"flex items-center justify-center",children:[g&&e.jsx("div",{className:"h-5 w-5 border-t-transparent border-solid animate-spin rounded-full border-white border-4"})," ",e.jsxs("div",{className:"ml-2",children:[b?"Update":"Create"," Session"]})]})})]})})}function U(){const[s,t]=x.useState(null),[l,n]=x.useState(!1),[i,a]=x.useState(!1),{state:o}=L();let h;const[d,m]=x.useState("");x.useEffect(()=>{const r=window.location.origin;m(r)},[window.location.search,window.location.origin,m,o]);const g=()=>{s!=null&&s.linkToken?navigator.clipboard.writeText(d+"?linkToken="+(s==null?void 0:s.linkToken)):navigator.clipboard.writeText(d),n(!0)};x.useEffect(()=>(s&&s.regenerateLinkToken&&u(s),()=>{p()}),[s]);const b=async()=>{p();try{const r=await f.Session.refreshLinkToken(s==null?void 0:s.sessionId);r&&(t(r),u(r))}catch(r){console.log(r)}},u=r=>{h=setTimeout(b,r.linkExpiryFreequency*1e3-2e3)},p=()=>{clearTimeout(h)};return x.useEffect(()=>{if(l){const r=setTimeout(()=>{n(!1)},2e3);return()=>clearTimeout(r)}},[l]),x.useEffect(()=>{const r=async()=>{try{a(!0);const c=await f.Session.getCurrentSession();t(c)}catch(c){console.log(c)}finally{a(!1)}};o&&o.session?t(o.session):r()},[]),i?e.jsx(C,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-gray-900 text-left px-6",children:s?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:s.sessionName}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Expires at"," ",F(new Date(s.sessionExpiresAt),"MMMM, EEEE do, h:mm a")]})]})}):e.jsx("h2",{className:"text-lg font-semibold",children:"No active session yet, create one!"})}),e.jsxs("div",{className:"mt-5 w-full flex flex-col items-center overflow-hidden text-sm",children:[e.jsx("div",{className:"w-80 bg-white p-3 border-2 border-black-500",children:e.jsx(ne,{className:"w-full h-full object-cover",value:d+(s!=null&&s.linkToken?"?linkToken="+(s==null?void 0:s.linkToken):" ")})}),e.jsx("button",{onClick:g,className:"w-80 my-4 text-gray-200 block rounded-lg text-center leading-6 px-6 py-3 bg-slate-600 hover:bg-slate-700 hover:text-white font-medium transition-colors",children:l?"Copied!":"Copy to clipboard"})]})]})}function be(){var d,m,g,b,u;const s=A(),{register:t,handleSubmit:l,formState:{errors:n,isSubmitting:i}}=O({resolver:D(oe)}),[a,o]=x.useState(!0),h=async({firstName:p,lastName:r,email:c,password:w})=>{try{console.log("submitting ",{firstName:p,lastName:r,email:c,password:w}),await f.Account.register({firstName:p,lastName:r,email:c,password:w}),s("/login")}catch(v){console.log(v)}};return e.jsxs("div",{className:"bg-purple-900 absolute top-0 left-0 bg-gradient-to-b from-gray-500 via-gray-500 to-slate-700 bottom-0 leading-5 h-full w-full ",children:[e.jsx("div",{className:"bg-purple-900 absolute top-0 left-0 bg-gradient-to-b from-gray-500 via-gray-500 to-slate-700 bottom-0 leading-5 h-full w-full overflow-hidden"}),e.jsx("div",{className:"relative min-h-screen  sm:flex sm:flex-row  justify-center bg-transparent rounded-3xl shadow-xl",children:e.jsx("div",{className:"flex justify-center self-center  z-10",children:e.jsxs("div",{className:"p-12 pt-2 bg-white mx-auto rounded-3xl w-96 ",children:[e.jsxs("h3",{className:"font-semibold text-xl text-gray-800 mb-2 ",children:["Join Us!"," "]}),e.jsx("div",{children:e.jsxs("form",{onSubmit:l(h),className:"space-y-6",children:[e.jsxs("div",{className:"",children:[e.jsx("input",{...t("firstName"),className:" w-full text-sm  px-4 py-3 bg-gray-200 focus:bg-gray-100 border  border-gray-200 rounded-lg focus:outline-none focus:border-purple-400",placeholder:"First Name"}),n.firstName&&e.jsx("p",{className:"text-red-500 text-xs italic",children:(d=n.firstName)==null?void 0:d.message})]}),e.jsxs("div",{className:"",children:[e.jsx("input",{...t("lastName"),className:" w-full text-sm  px-4 py-3 bg-gray-200 focus:bg-gray-100 border  border-gray-200 rounded-lg focus:outline-none focus:border-purple-400",placeholder:"Last Name"}),n.lastName&&e.jsx("p",{className:"text-red-500 text-xs italic",children:(m=n.lastName)==null?void 0:m.message})]}),e.jsxs("div",{className:"",children:[e.jsx("input",{...t("email"),className:" w-full text-sm  px-4 py-3 bg-gray-200 focus:bg-gray-100 border  border-gray-200 rounded-lg focus:outline-none focus:border-purple-400",type:"",placeholder:"Email"}),n.email&&e.jsx("p",{className:"text-red-500 text-xs italic",children:(g=n.email)==null?void 0:g.message})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{...t("password"),placeholder:"Password",type:a?"password":"text",className:"text-sm px-4 py-3 rounded-lg w-full bg-gray-200 focus:bg-gray-100 border border-gray-200 focus:outline-none focus:border-slate-400"}),e.jsx("div",{className:"flex items-center absolute inset-y-0 right-0 mr-3  text-sm leading-5",children:a?e.jsx("svg",{onClick:()=>o(!a),className:"h-4 text-slate-500 hover:text-slate-700 transition-colors",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:e.jsx("path",{fill:"currentColor",d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"})}):e.jsx("svg",{className:"h-4 text-slate-500 hover:text-slate-700 transition-colors",onClick:()=>o(!a),fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",children:e.jsx("path",{fill:"currentColor",d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"})})})]}),n.password&&e.jsx("p",{className:"text-red-500 text-xs italic",children:(b=n.password)==null?void 0:b.message})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{...t("confirmPassword"),placeholder:"Confirm Password",type:a?"password":"text",className:"text-sm px-4 py-3 rounded-lg w-full bg-gray-200 focus:bg-gray-100 border border-gray-200 focus:outline-none focus:border-slate-400"}),e.jsx("div",{className:"flex items-center absolute inset-y-0 right-0 mr-3  text-sm leading-5",children:a?e.jsx("svg",{onClick:()=>o(!a),className:"h-4 text-slate-500 hover:text-slate-700 transition-colors",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:e.jsx("path",{fill:"currentColor",d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"})}):e.jsx("svg",{className:"h-4 text-slate-500 hover:text-slate-700 transition-colors",onClick:()=>o(!a),fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",children:e.jsx("path",{fill:"currentColor",d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"})})})]}),n.confirmPassword&&e.jsx("p",{className:"text-red-500 text-xs italic",children:(u=n.confirmPassword)==null?void 0:u.message})]}),e.jsxs("div",{children:[e.jsx("button",{type:"submit",className:"my-4 bg-slate-500 hover:bg-slate-700 text-white text-base rounded-lg py-2.5 px-5 transition-colors w-full text-[19px]",children:e.jsxs("div",{className:"flex items-center justify-center",children:[i&&e.jsx("div",{className:"h-5 w-5 border-t-transparent border-solid animate-spin rounded-full border-white border-4"})," ",e.jsx("div",{className:"ml-2",children:" Sign Up "})]})}),e.jsxs("p",{className:"text-gray-400",children:["Already have an account?"," ",e.jsx(k,{to:"/login",className:"text-sm text-purple-700 hover:text-purple-700",children:"Sign In"})]})]})]})}),e.jsx("div",{className:"mt-7 text-center text-gray-300 text-xs",children:e.jsxs("span",{children:["Copyright Â© 2023-2024",e.jsx("a",{href:"#",rel:"",target:"_blank",title:"Fabala Dibbasey",className:"ml-2 text-purple-500 hover:text-purple-600 ",children:"Fabala"})]})})]})})}),e.jsx("svg",{className:"absolute bottom-0 left-0 ",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",children:e.jsx("path",{fill:"#fff",fillOpacity:"1",d:"M0,0L40,42.7C80,85,160,171,240,197.3C320,224,400,192,480,154.7C560,117,640,75,720,74.7C800,75,880,117,960,154.7C1040,192,1120,224,1200,213.3C1280,203,1360,149,1400,122.7L1440,96L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"})})]})}function $({roles:s}){const t=L(),l=A(),n=JSON.parse(localStorage.getItem("user")||"{}");return!n||!n.token||n.token.split(".").length!==3?e.jsx(J,{to:"/login",state:{from:t}}):s&&!s.some(i=>{var a;return(a=n.roles)==null?void 0:a.includes(i)})?(S.error("You are not authorized to access this area"),l(-1),null):e.jsx(I,{})}function je(){const s=L(),l=new URLSearchParams(window.location.search).get("linkToken"),n=localStorage.getItem("linkToken");return!n&&!l||(n==null?void 0:n.split(".").length)!==3&&(l==null?void 0:l.split(".").length)!==3?e.jsx(J,{to:"/login",state:{from:s}}):e.jsx(I,{})}function ye(){var t;const s=L();return e.jsxs("div",{className:"bg-purple-900 absolute top-0 left-0 bg-gradient-to-b from-gray-500 via-gray-500 to-slate-700 bottom-0 leading-5 h-full w-full ",children:[e.jsx("div",{className:"bg-purple-900 absolute top-0 left-0 bg-gradient-to-b from-gray-500 via-gray-500 to-slate-700 bottom-0 leading-5 h-full w-full overflow-hidden"}),e.jsx("div",{className:"relative min-h-screen  sm:flex sm:flex-row  justify-center bg-transparent rounded-3xl shadow-xl",children:e.jsx("div",{className:"w-9/12 m-auto py-16 min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"bg-slate-500 opacity-50 shadow overflow-hidden sm:rounded-lg pb-8 z-10",children:e.jsxs("div",{className:" text-center pt-8",children:[e.jsx("h1",{className:"text-9xl font-bold text-purple-400",children:"404"}),e.jsx("h1",{className:"text-6xl font-medium py-8",children:"oops! Page not found"}),e.jsx("p",{className:"text-2xl pb-8 px-12 font-medium text-white",children:"Oops! The page you are looking for does not exist. It might have been moved or deleted."}),e.jsx(k,{to:((t=s.state)==null?void 0:t.from)??"/login",className:"my-4 bg-slate-500 hover:bg-slate-700 text-white text-base rounded-lg py-2.5 px-5 transition-colors w-full text-[19px] md:w-1/4 mx-auto",children:"Take Me Back Home"})," "]})})})}),e.jsx("svg",{className:"absolute bottom-0 left-0 ",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",children:e.jsx("path",{fill:"#fff",fillOpacity:"1",d:"M0,0L40,42.7C80,85,160,171,240,197.3C320,224,400,192,480,154.7C560,117,640,75,720,74.7C800,75,880,117,960,154.7C1040,192,1120,224,1200,213.3C1280,203,1360,149,1400,122.7L1440,96L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"})})]})}function ve({errors:s}){return e.jsx("div",{className:"bg-red-50 border-l-8 border-red-900 mb-2",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"ml-2",children:e.jsx("svg",{className:"h-8 w-8 text-red-900 mr-2 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"px-6 py-4 text-red-900 font-semibold text-lg",children:"Please fix the following errors."})]}),e.jsx("div",{className:"px-16 mb-4",children:e.jsx("ul",{className:"list-disc list-inside",children:s.map(t=>e.jsx("li",{className:"text-red-900 text-sm",children:t}))})})]})})})}function Ne(){const s="/api",[t,l]=x.useState(void 0);function n(){y.get(s+"/buggy/not-found").catch(d=>console.log(d.response))}function i(){y.get(s+"/buggy/bad-request").catch(d=>console.log(d.response))}function a(){y.get(s+"/buggy/server-error").catch(d=>console.log(d.response))}function o(){y.get(s+"/buggy/unauthorised").catch(d=>console.log(d))}function h(){y.post(s+"/buggy/validation-error",{}).catch(d=>l(d))}return e.jsxs("div",{className:"w-screen flex flex-col items-center justify-cente",children:[e.jsxs("div",{className:"w-full mx-auto py-16",children:[e.jsx("h1",{className:"text-3xl text-center font-bold mb-6",children:"Error testing"}),e.jsx("div",{className:`\r
          bg-white\r
          px-6\r
          py-4\r
          my-3\r
          w-3/4\r
          mx-auto\r
          shadow\r
          rounded-md\r
          flex\r
          items-center\r
        `,children:e.jsxs("div",{className:"w-full text-center mx-auto",children:[e.jsx("button",{onClick:n,type:"button",className:`\r
              border border-indigo-500\r
              bg-indigo-500\r
              text-white\r
              rounded-md\r
              px-4\r
              py-2\r
              m-2\r
              transition\r
              duration-500\r
              ease\r
              select-none\r
              hover:bg-indigo-600\r
              focus:outline-none focus:shadow-outline\r
            `,children:"Not Found"}),e.jsx("button",{onClick:i,type:"button",className:`\r
              border border-teal-500\r
              bg-teal-500\r
              text-white\r
              rounded-md\r
              px-4\r
              py-2\r
              m-2\r
              transition\r
              duration-500\r
              ease\r
              select-none\r
              hover:bg-teal-600\r
              focus:outline-none focus:shadow-outline\r
            `,children:"Bad request"}),e.jsx("button",{onClick:a,type:"button",className:`\r
              border border-red-500\r
              bg-red-500\r
              text-white\r
              rounded-md\r
              px-4\r
              py-2\r
              m-2\r
              transition\r
              duration-500\r
              ease\r
              select-none\r
              hover:bg-red-600\r
              focus:outline-none focus:shadow-outline\r
            `,children:"Server error"}),e.jsx("button",{onClick:o,type:"button",className:`\r
              border border-yellow-500\r
              bg-yellow-500\r
              text-white\r
              rounded-md\r
              px-4\r
              py-2\r
              m-2\r
              transition\r
              duration-500\r
              ease\r
              select-none\r
              hover:bg-yellow-600\r
              focus:outline-none focus:shadow-outline\r
            `,children:"Not authorized"}),e.jsx("button",{onClick:h,type:"button",className:`\r
              border border-gray-500\r
              bg-gray-500\r
              text-white\r
              rounded-md\r
              px-4\r
              py-2\r
              m-2\r
              transition\`\r
              duration-500\r
              ease\r
              select-none\r
              hover:bg-gray-600\r
              focus:outline-none focus:shadow-outline\r
            `,children:"Validation Error"})]})})]}),t&&e.jsx(ve,{errors:t})]})}function Se(){const s=A(),{state:t}=L();return t?e.jsxs("div",{className:"bg-purple-900 absolute top-0 left-0 bg-gradient-to-b from-gray-500 via-gray-500 to-slate-700 bottom-0 leading-5 h-full w-full ",children:[e.jsx("div",{className:"bg-purple-900 absolute top-0 left-0 bg-gradient-to-b from-gray-500 via-gray-500 to-slate-700 bottom-0 leading-5 h-full w-full overflow-hidden"}),e.jsx("div",{className:"relative min-h-screen  sm:flex sm:flex-row  justify-center bg-transparent rounded-3xl shadow-xl",children:e.jsx("div",{className:"w-9/12 m-auto py-16 min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"bg-slate-500 opacity-50 shadow overflow-hidden sm:rounded-lg pb-8 z-10 w-full",children:e.jsxs("div",{className:" text-center pt-8",children:[e.jsx("h1",{className:"text-9xl font-bold text-purple-400",children:"500"}),e.jsx("h1",{className:"text-6xl font-medium py-8",children:t.error.title}),e.jsx("p",{className:"text-2xl pb-8 px-12 font-medium text-white",children:t.error.detail}),e.jsx("button",{onClick:()=>s(-1),className:"my-4 bg-slate-500 hover:bg-slate-700 text-white text-base rounded-lg py-2.5 px-5 transition-colors w-full text-[19px] md:w-1/4 mx-auto",children:"Take Me Back Home"})," "]})})})}),e.jsx("svg",{className:"absolute bottom-0 left-0 ",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",children:e.jsx("path",{fill:"#fff",fillOpacity:"1",d:"M0,0L40,42.7C80,85,160,171,240,197.3C320,224,400,192,480,154.7C560,117,640,75,720,74.7C800,75,880,117,960,154.7C1040,192,1120,224,1200,213.3C1280,203,1360,149,1400,122.7L1440,96L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"})})]}):null}const ke=[{path:"/",element:e.jsx(ge,{}),children:[{element:e.jsx(je,{}),children:[{path:"/",element:e.jsx(me,{})}]},{path:"/login",element:e.jsx(de,{})},{path:"/signup",element:e.jsx(be,{})},{element:e.jsx($,{}),children:[{path:"/user-profile",element:e.jsx(he,{}),children:[{path:"/user-profile",element:e.jsx(U,{})},{path:"/user-profile/current-session",element:e.jsx(U,{})},{path:"/user-profile/generate-qr-code/:id?",element:e.jsx(we,{})},{path:"/user-profile/session-history",element:e.jsx(ue,{})}]},{path:"/session-details/:id",element:e.jsx(xe,{})}]},{element:e.jsx($,{roles:["Admin"]}),children:[{path:"/test-errors",element:e.jsx(Ne,{})}]},{path:"/server-error",element:e.jsx(Se,{})},{path:"*",element:e.jsx(ye,{})}]}],E=Z(ke);W.createRoot(document.getElementById("root")).render(e.jsx(V.StrictMode,{children:e.jsx(ee,{router:E})}));
